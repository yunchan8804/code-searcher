<Window x:Class="UnicodeSearcher.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="설정"
        Height="580" Width="400"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        Background="#FAFAFA"
        ShowInTaskbar="False">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- 외관 설정 -->
        <GroupBox Grid.Row="0" Header="외관" Padding="12" Margin="0,0,0,12">
            <StackPanel>
                <TextBlock Text="테마:" Margin="0,0,0,6"/>
                <ComboBox x:Name="ThemeComboBox"
                          SelectedValue="{Binding SelectedTheme}"
                          SelectedValuePath="Tag"
                          Padding="8,6">
                    <ComboBoxItem Content="시스템 설정 따르기" Tag="System"/>
                    <ComboBoxItem Content="라이트 모드" Tag="Light"/>
                    <ComboBoxItem Content="다크 모드" Tag="Dark"/>
                </ComboBox>
            </StackPanel>
        </GroupBox>

        <!-- 동작 설정 -->
        <GroupBox Grid.Row="1" Header="동작" Padding="12" Margin="0,0,0,12">
            <StackPanel>
                <CheckBox Content="문자 선택 시 창 닫기"
                          IsChecked="{Binding CloseOnSelect}"
                          Margin="0,0,0,8"/>
                <CheckBox Content="창 닫을 때 검색어 초기화"
                          IsChecked="{Binding ClearSearchOnClose}"
                          Margin="0,0,0,8"/>
                <CheckBox Content="작업 표시줄에 표시"
                          IsChecked="{Binding ShowInTaskbar}"/>
            </StackPanel>
        </GroupBox>

        <!-- 핫키 설정 -->
        <GroupBox Grid.Row="2" Header="글로벌 핫키" Padding="12" Margin="0,0,0,12">
            <StackPanel>
                <TextBlock Text="현재 핫키:" Margin="0,0,0,6"/>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <TextBox x:Name="HotkeyTextBox"
                             Grid.Column="0"
                             Text="{Binding HotkeyDisplay, Mode=OneWay}"
                             IsReadOnly="True"
                             IsReadOnlyCaretVisible="True"
                             Focusable="True"
                             Padding="8,6"
                             Background="#F0F0F0"
                             PreviewKeyDown="HotkeyTextBox_PreviewKeyDown"
                             PreviewMouseDown="HotkeyTextBox_PreviewMouseDown"
                             GotFocus="HotkeyTextBox_GotFocus"
                             LostFocus="HotkeyTextBox_LostFocus"/>

                    <TextBlock Grid.Column="1"
                               Text="클릭하고 키 입력"
                               FontSize="11"
                               Foreground="Gray"
                               VerticalAlignment="Center"
                               Margin="8,0,0,0"/>
                </Grid>
                <TextBlock Text="Ctrl, Alt, Shift 중 하나 이상과 일반 키 조합"
                           FontSize="11"
                           Foreground="Gray"
                           Margin="0,6,0,0"/>
            </StackPanel>
        </GroupBox>

        <!-- 시작 설정 -->
        <GroupBox Grid.Row="3" Header="시작" Padding="12" Margin="0,0,0,12">
            <StackPanel>
                <CheckBox Content="Windows 시작 시 자동 실행"
                          IsChecked="{Binding RunAtStartup}"
                          Margin="0,0,0,8"/>
                <CheckBox Content="시작 시 트레이로 최소화"
                          IsChecked="{Binding StartMinimized}"
                          IsEnabled="{Binding RunAtStartup}"/>
            </StackPanel>
        </GroupBox>

        <!-- 버튼 -->
        <StackPanel Grid.Row="5" Orientation="Horizontal" HorizontalAlignment="Right">
            <Button Content="기본값"
                    Command="{Binding ResetToDefaultsCommand}"
                    Padding="16,8"
                    Margin="0,0,8,0"
                    Background="#F5F5F5"
                    BorderBrush="#E0E0E0"/>

            <Button Content="취소"
                    Command="{Binding CancelCommand}"
                    Padding="16,8"
                    Margin="0,0,8,0"
                    Background="#F5F5F5"
                    BorderBrush="#E0E0E0"/>

            <Button x:Name="SaveButton"
                    Content="저장"
                    Command="{Binding SaveCommand}"
                    Padding="16,8"
                    Background="#2196F3"
                    Foreground="White"
                    BorderThickness="0">
                <Button.Style>
                    <Style TargetType="Button">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="Button">
                                    <Border x:Name="border"
                                            Background="{TemplateBinding Background}"
                                            CornerRadius="4"
                                            Padding="{TemplateBinding Padding}">
                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter TargetName="border" Property="Background" Value="#1976D2"/>
                                        </Trigger>
                                        <Trigger Property="IsPressed" Value="True">
                                            <Setter TargetName="border" Property="Background" Value="#1565C0"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </Button.Style>
            </Button>
        </StackPanel>
    </Grid>
</Window>
