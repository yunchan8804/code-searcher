# Phase 4: v1.1 UX 개선

> **목표**: 키보드 중심 UX 완성 및 버그 수정

**상태**: 🚧 진행 중

---

## 발견된 문제점

### 1. 복사 성공인데 "복사 실패!" 메시지 표시
- **증상**: Enter로 문자 복사 시 실제로는 복사되지만 "복사 실패!" 토스트가 나옴
- **원인 추정**: ClipboardService 또는 복사 결과 처리 로직 문제
- **우선순위**: 🔴 High

### 2. 키보드 네비게이션 시 하이라이트 안 보임
- **증상**: 화살표 키로 아이템 이동 시 어떤 아이템이 선택됐는지 시각적 표시 없음
- **원인 추정**: 포커스 스타일 또는 선택 상태 바인딩 문제
- **우선순위**: 🔴 High

### 3. 카테고리 키보드 네비게이션 없음
- **증상**: 검색창/최상단에서 ↑↓ 키로 카테고리 선택 불가
- **요구사항**:
  - 검색창에서 ↓ → 카테고리 탭으로 이동
  - 카테고리 탭에서 ←→ → 카테고리 전환
  - 카테고리 탭에서 ↓ → 아이템 그리드로 이동
  - 아이템 그리드 최상단에서 ↑ → 카테고리 탭으로 이동
- **우선순위**: 🟡 Medium

### 4. 핫키로 창 호출 시 검색창 포커스 안 됨
- **증상**: Ctrl+Alt+Space로 창 띄울 때 검색창에 자동 포커스 안 됨
- **원인 추정**: ShowWindow 메서드에서 포커스 설정 누락
- **우선순위**: 🔴 High

### 5. Enter 동작 변경 요청
- **현재**: Enter → 클립보드 복사 + 창 닫기
- **요청**:
  - **Enter** → 이전 활성 창에 붙여넣기 + 창 닫기
  - **Ctrl+C** → 클립보드 복사만 (창 유지)
- **우선순위**: 🟡 Medium

---

## 작업 목록

### 4.1 복사 메시지 버그 수정
- [ ] ClipboardService 복사 결과 확인 로직 검토
- [ ] MainViewModel에서 복사 성공/실패 판단 로직 수정
- [ ] 토스트 메시지 표시 조건 수정

**예상 파일**: `Services/ClipboardService.cs`, `ViewModels/MainViewModel.cs`

---

### 4.2 키보드 네비게이션 하이라이트
- [ ] 아이템 선택 시 시각적 포커스 스타일 적용
- [ ] ListBox/ItemsControl 포커스 상태 스타일 정의
- [ ] 키보드 포커스와 선택 상태 동기화

**예상 파일**: `MainWindow.xaml`, `Resources/Styles.xaml`

**UI 명세**:
```
선택된 아이템:
┌─────────┐
│   ★    │ ← 테두리 강조 (#0078D4)
│         │   배경색 변경 (#E5F1FB)
└─────────┘
```

---

### 4.3 카테고리 키보드 네비게이션
- [ ] 검색창 ↓ 키 → 카테고리 탭 포커스
- [ ] 카테고리 탭 ←→ 키 → 카테고리 전환
- [ ] 카테고리 탭 ↓ 키 → 아이템 그리드 포커스
- [ ] 아이템 그리드 최상단 ↑ 키 → 카테고리 탭 포커스
- [ ] 카테고리 탭 ↑ 키 → 검색창 포커스

**키보드 흐름**:
```
[검색창]
    ↓
[카테고리 탭] ← → (카테고리 전환)
    ↓
[아이템 그리드] ← → ↑ ↓ (아이템 이동)
```

**예상 파일**: `MainWindow.xaml.cs`, `MainWindow.xaml`

---

### 4.4 핫키 호출 시 검색창 포커스
- [ ] ShowWindow() 메서드에서 검색창 포커스 설정
- [ ] Dispatcher를 사용한 지연 포커스 (UI 렌더링 후)
- [ ] 기존 검색어 전체 선택

**예상 파일**: `MainWindow.xaml.cs`

**코드 스니펫**:
```csharp
public void ShowWindow(bool positionNearCursor = false)
{
    // ... 기존 코드 ...
    Show();
    Activate();

    // 검색창 포커스 + 전체 선택
    Dispatcher.BeginInvoke(() =>
    {
        SearchTextBox.Focus();
        SearchTextBox.SelectAll();
    }, DispatcherPriority.Input);
}
```

---

### 4.5 Enter/Ctrl+C 동작 변경
- [ ] Enter → 붙여넣기 동작으로 변경
  - [ ] 이전 활성 창 복원
  - [ ] SendKeys 또는 Clipboard + Ctrl+V 시뮬레이션
  - [ ] 창 닫기
- [ ] Ctrl+C → 복사만 (창 유지)
- [ ] Space → 복사만 (창 유지) - 기존 유지

**동작 매트릭스**:
| 키 | 동작 | 창 상태 |
|----|------|---------|
| Enter | 이전 창에 붙여넣기 | 닫힘 |
| Ctrl+C | 클립보드 복사 | 유지 |
| Space | 클립보드 복사 | 유지 |
| Ctrl+Enter | 클립보드 복사 | 닫힘 |

**예상 파일**: `MainWindow.xaml.cs`, `Helpers/WindowHelper.cs`

---

## 완료 기준 체크리스트

### 버그 수정
- [ ] 복사 성공 시 "복사 완료" 메시지 표시
- [ ] 핫키로 창 호출 시 검색창 자동 포커스

### UX 개선
- [ ] 화살표 키로 아이템 이동 시 하이라이트 표시
- [ ] 카테고리 탭 키보드 네비게이션
- [ ] Enter = 붙여넣기, Ctrl+C = 복사

### 테스트
- [ ] 기존 76개 테스트 통과
- [ ] 수동 테스트: 키보드만으로 전체 워크플로우 완료 가능

---

## 참고: 키보드 UX 전체 흐름

```
[다른 앱에서 작업 중]
       │
       ▼ Ctrl+Alt+Space
┌─────────────────────────────────┐
│ 검색창 (자동 포커스, 전체 선택)  │
│         │                       │
│         ▼ ↓ 키                  │
│ [전체][별][화살표][체크]...     │ ← ← → 카테고리 전환
│         │                       │
│         ▼ ↓ 키 또는 Enter       │
│ ┌───┬───┬───┬───┐              │
│ │ ★ │ ☆ │ ✦ │...│              │ ← 하이라이트 표시
│ └───┴───┴───┴───┘              │   ← → ↑ ↓ 이동
│         │                       │
│         ▼ Enter                 │
└─────────────────────────────────┘
       │
       ▼ 이전 앱으로 복귀 + 붙여넣기
[선택한 문자가 입력됨]
```
